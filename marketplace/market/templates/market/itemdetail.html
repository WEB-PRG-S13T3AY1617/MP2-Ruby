{% load static %}
<html>
    <head><title>View Album's Photos</title>
        <link rel="stylesheet" type="text/css" href="{%static 'market/itemstyle.css' %}">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
    </head>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
        <script>
        $(document).on("keypress", ".search", function(e) {
            if (e.which == 13) {
            
            }
        });
    
</script>
   
    <body>
        <div id = page>
           <div class = "bar-container">
                <div class = "bar">
                    <div class = "item-container">
                        {% if user.is_authenticated == True %}
                        <div class = "bar-item">Hi, <a href="{% url 'market:user' user.id %}"> {{ user.username }} </a> !</div>
                        {% else %}
                        <a href="/register/"><div class = "bar-item">Register</div></a>
                        {% endif %}
                        
                        {% if user.is_authenticated == True %}
                        <a href="/logout/">
                            <div class = "bar-item">Logout</div>
                            </a>
                        {% else %}
                        <a href="/login/">
                            <div class = "bar-item">Login</div>
                        </a>
                         {% endif %}
                    </div>
                </div>
            </div>
            <div class = "bar-container">
                <div class = "a-container">
                    <div class = "left-container"> </div>
                    <div class = "middle-container">
                        <img src = "{%static 'photos/rccshop.png' %}" width="300" height="200" class = "rcc"/>
                    </div>
                    <div class = "right-container">
     <form action="{% url 'market:searchpic' %}">
     	<input type="text" class="search" name = "tag" placeholder="Search tag..." style="background-image:url('{%static 'photos/magnifyglass.png' %}')">
     </form>
</div>

                </div>
            </div>
            <div class = "bar-container">
                <div class = "menu">
                    <div class = "b-container">
                        <a href="/market"><div class = "home"> <span class = "t"> Home </span> </div></a>
                        <a href="/market/postanitem"><div class = "ppost"> <span class = "s"> Post an Item </span> </div></a>
                    </div>
                </div>
            </div>
            
            
            <div id ="main-container">
                <div id="photobox">
                    <div class="pics" id="p1" > 
                       <img src= "{{ post.tb_img.url }}" id ="thumb" onclick="openModal();currentSlide(1)" class="hover-shadow cursor" alt="no photo loaded yet">
                    </div>       
                </div>
                
                <div class = "detail-info">
                    <div>Itemname: {{post.itemname}}</div>
                    <div>Quantity x {{post.quantity}}</div>
                    <div>Condition: <a href = "{% url 'market:searchcondition' post.tag %}"> {{post.condition}}</a></div>
                    <div>Type: <a href = "{% url 'market:searchtype' post.posttypes %}">{{post.posttypes}}</a></div>
                    {%if post.posttypes == " Academic"%}
                    <div>Course Name: <a href = "{% url 'market:searchcourse' post.coursename %}">{{post.coursename}}</a></div>
                    {%endif%}
                    <div>Tags:<a href = "{% url 'market:searchtag' post.tag %}"> {{post.tag}}</a></div>
                   <div> posted by <a href = "{% url 'market:user' post.user.id %}">{{post.user.username}}</a></div>
                </div>
                    
                

               
            </div>

            <div id="zoomed-photo">
                <span class="close cursor" onclick="closeModal()">x</span>
                <div class="modal-content">
                    <div class ="slide-container">
                        <div id="s1" class="mySlides">
                            <img  src= "{{ post.tb_img.url }}" id="photo" alt="No photo loaded yet">
                        </div>
                        

                    </div>
                   

                   
                </div>
            </div>
        </div>
        
        
        
        <script>
            function openModal() {
                document.getElementById('zoomed-photo').style.display = "block";
            }
            function closeModal() {
                document.getElementById('zoomed-photo').style.display = "none";
            }

            var slideIndex = 1;
            showSlides(slideIndex);

            function plusSlides(n) {
                showSlides(slideIndex += n);
            }

            function currentSlide(n) {
                showSlides(slideIndex = n);
            }
            
            function showSlides(n) {
                var i;
                var slides = document.getElementsByClassName("mySlides");
                var capt = document.getElementsByClassName("details");
                
                if (n > slides.length)
                    slideIndex = 1
                if (n < 1) 
                    slideIndex = slides.length
                for (i = 0; i < slides.length; i++)
                    slides[i].style.display = "none";
                for (i = 0; i < capt.length; i++)
                    capt[i].style.display = "none";
                
                
                slides[slideIndex-1].style.display = "block";
                
                capt[slideIndex-1].style.display = "block";
                
                var captionText = captionText = capt.valueOf();
               
                
            }
        </script>
    </body>
</html>
