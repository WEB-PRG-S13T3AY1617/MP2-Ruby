{% load static %}
<html>
	<head><title>{{user.username}}'s  Profile</title>
		<link rel="stylesheet" type="text/css" href="{%static 'market/userstyle.css' %}"/>
      
	</head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
        <script>
        $(document).on("keypress", ".search", function(e) {
            if (e.which == 13) {
            
            }
        });
    
</script>
    
   	<body>
        <div id = page>
			<div class = "bar-container">
                <div class = "bar">
                    <div class = "item-container">
                        {% if user.is_authenticated == True %}
                        <div class = "bar-item">Hi, <a href="{% url 'market:user' user.id %}"> {{ user.username }} </a> !</div>
                        {% else %}
                        <a href="/register/"><div class = "bar-item">Register</div></a>
                        {% endif %}
                        
                        {% if user.is_authenticated == True %}
                        <a href="/logout/">
                            <div class = "bar-item">Logout</div>
                            </a>
                        {% else %}
                        <a href="/login/">
                            <div class = "bar-item">Login</div>
                        </a>
                         {% endif %}
                    </div>
                </div>
            </div>
            <div class = "bar-container">
                <div class = "a-container">
                    <div class = "left-container"> </div>
                    <div class = "middle-container">
                        <img src = "{%static 'photos/rccshop.png' %}" width="300" height="200" class = "rcc"/>
                    </div>
                    <div class = "right-container">
     <form action="{% url 'market:searchpic' %}">
     	<input type="text" class="search" name = "tag" placeholder="Search tag..." style="background-image:url('{%static 'photos/magnifyglass.png' %}')">
     </form>
</div>

                </div>
            </div>
            <div class = "bar-container">
                <div class = "menu">
                    <div class = "b-container">
                        <a href="/market"><div class = "home"> <span class = "t"> Home </span> </div></a>
                        <a href="/market/postanitem"><div class = "ppost"> <span class = "s"> Post an Item </span> </div></a>
                    </div>
                </div>
            </div>
            
			<div class = full_container>
				<div class = mydata>
					<div class = name_container>
                        <div class = name_text>{{user2.first_name}} {{user2.last_name}}</div>
                        <div></div>
                        <div class = uname>@{{user2.username}}</div>
                    
                    </div>
                
                    
                    <div id = info_container>
                        <div class = listinfo>
                                <div class = types ><span>User Type : {{userprof.usertypes}}</span></div>
                                <div class = types_place ><span>Degree Program/Office :  {{userprof.Degree_Program_or_Office}}</span></div>
                                
                        </div>
       
                    </div>
                      {%if user.username == user2.username %}
                    <div id = offer_container>
                        <div class =  offerinfo>
                            <div class = offer><span>OFFER</span></div>
                            <div></div>
                            <div class = list>
                             {% for offer in list_offer %}   
                                {% for post in latest_posts %} 
                                    {%if offer.post == post%}
                                    <div onclick="openModal();currentSlide(1)" >{{offer.post.itemname}} made by {{offer.user.username}}</div>
                                    {%endif%}
                                {% endfor %}
                            {% endfor %}
                            </div>
                        </div>
                    </div>
                    {%endif%}
				</div>
					
				
				
				
				<div id = psection>
					{% if latest_posts %}
					<div id = post_container>
                        {% for post in latest_posts %}
                        <div id = post_box>
                            <div class = post id = 1 >
                               <a href = "{% url 'market:itemdetail' post.id %}"><img src = "{{ post.tb_img.url }}" id ="thumb"  alt="no photo loaded yet"></a>
                                <div class = info>
                                    <div>{{post.itemname}}</div>
                                    <div>#{{post.tag}}</div>
                                     
                                </div>
                            </div>
                            {% endfor %}
                            {% endif %}
                      
                        </div>
                       
                        <div class="pagination">
                    <span class="step-links">
                        {% if latest_posts.has_previous %}
                        <a href="?page={{ latest_posts.previous_page_number }}">previous</a>
                        {% endif %}

                        <span class="current">
                            Page {{ latest_posts.number }} of {{ latest_posts.paginator.num_pages }}.
                        </span>

                        {% if latest_posts.has_next %}
                        <a href="?page={{ latest_posts.next_page_number }}">next</a>
                        {% endif %}
                    </span>
					</div>
					</div>
				</div>
                
               
		
            </div>
              <div id="zoomed-photo">
                <span class="close cursor" onclick="closeModal()">x</span>
                <div class="modal-content">
                    <div class ="slide-container">
                        <div id="s1" class="mySlides">
                            <div>HIHIHIHI</div>
                        </div>
                    </div> 
                </div>
            </div>
            
            <!-- The Modal -->
            <div id="myModal1" class="modal1">

              <!-- Modal content -->
              <div class="modal-content1">
                <div class="modal-header1">
                  <span class="close1">&times;</span>
                  <h2>Modal Header</h2>
                </div>
                <div class="modal-body1">
                  <p>Some text in the Modal Body</p>
                  <p>Some other text...</p>
                </div>
                <div class="modal-footer1">
                  <h3>Modal Footer</h3>
                </div>
              </div>

            </div>
        </div>
        
         <script>
            function openModal() {
                document.getElementById('zoomed-photo').style.display = "block";
            }
            function closeModal() {
                document.getElementById('zoomed-photo').style.display = "none";
            }

            var slideIndex = 1;
            showSlides(slideIndex);

            function plusSlides(n) {
                showSlides(slideIndex += n);
            }

            function currentSlide(n) {
                showSlides(slideIndex = n);
            }
            
            function showSlides(n) {
                var i;
                var slides = document.getElementsByClassName("mySlides");
                var capt = document.getElementsByClassName("details");
                
                if (n > slides.length)
                    slideIndex = 1
                if (n < 1) 
                    slideIndex = slides.length
                for (i = 0; i < slides.length; i++)
                    slides[i].style.display = "none";
                for (i = 0; i < capt.length; i++)
                    capt[i].style.display = "none";
                
                
                slides[slideIndex-1].style.display = "block";
                
                capt[slideIndex-1].style.display = "block";
                
                var captionText = captionText = capt.valueOf();
               
                
            }
        </script>
	</body>
  
</html>